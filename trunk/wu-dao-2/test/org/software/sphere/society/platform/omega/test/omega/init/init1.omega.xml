<?xml version="1.0"?>
<root>
	<global name="main">
		<service-define>
			<service name="global-init">
				<competitor name="main.main.main.main.io-server.init1" priority="1" />
				<competitor name="main.main.main.main.io-server.init2" priority="2" />
			</service>
		</service-define>
		<var-define>
			<bool name="global">true</bool>
		</var-define>
		<economy name="main">
			<service-define>
				<service name="economy-init">
					<competitor name="main.main.main.main.io-server.init1" priority="1" />
					<competitor name="main.main.main.main.io-server.init2" priority="2" />
				</service>
			</service-define>
			<var-define>
				<bool name="economy">true</bool>
			</var-define>
			<market name="main">
				<service-define>
					<service name="market-init">
						<competitor name="main.main.main.main.io-server.init1" priority="1" />
						<competitor name="main.main.main.main.io-server.init2" priority="2" />
					</service>
				</service-define>
				<var-define>
					<bool name="market">true</bool>
				</var-define>
				<supplier name="main">
					<service-define>
						<service name="supplier-init">
							<competitor name="main.main.main.main.io-server.init1" priority="1" />
							<competitor name="main.main.main.main.io-server.init2" priority="2" />
						</service>
					</service-define>
					<var-define>
						<bool name="supplier">true</bool>
					</var-define>
					
					<server name="main">
						<var-define>
							<bool name="server">true</bool>
						</var-define>
						<service-define>
							<service name="server-init">
								<competitor name="main.main.main.main.io-server.init1" priority="1" />
								<competitor name="main.main.main.main.io-server.init2" priority="2" />
							</service>
						</service-define>

						<thread name="main" port="31001">
							<property-define>
								<property name="connection.driver_class">super.host</property>
								<property name="connection.url">this.port</property>
							</property-define>

							<request name="request">
								<var-define>
									<bool name="request">true</bool>
								</var-define>
								<data>
									<line>
										<![CDATA[request data line1&]]>
									</line>
									<line>
										<![CDATA[request data line2]]>
									</line>
								</data>
							</request>
							<response name="response">
								<var-define>
									<bool name="response">true</bool>
								</var-define>
								<data>
									<line>
										<![CDATA[response data line1&]]>
									</line>
									<line>
										<![CDATA[response data line2]]>
									</line>
								</data>
							</response>

							<telnet serviceName="telnet-1">
								<property-define>
									<property name="connection.driver_class">super.host</property>
									<property name="connection.url">this.port</property>
								</property-define>
								<request name="request">
									<var-define>
										<bool name="request">true</bool>
									</var-define>
									<data>
										<line>
											<![CDATA[request data line1&]]>
										</line>
										<line>
											<![CDATA[request data line2]]>
										</line>
									</data>
								</request>
								<response name="response">
									<var-define>
										<bool name="response">true</bool>
									</var-define>
									<data>
										<line>
											<![CDATA[response data line1&]]>
										</line>
										<line>
											<![CDATA[response data line2]]>
										</line>
									</data>
								</response>
							</telnet>

							<if condition="1=1" name="if-flow-2">
								<telnet serviceName="">
									<property-define>
										<property name="connection.driver_class">super.host</property>
										<property name="connection.url">this.port</property>
									</property-define>
									<request name="request">
										<var-define>
											<bool name="request">true</bool>
										</var-define>
										<data>
											<line>
												<![CDATA[request data line1&]]>
											</line>
											<line>
												<![CDATA[request data line2]]>
											</line>
										</data>
									</request>
									<response name="response">
										<var-define>
											<bool name="request">true</bool>
										</var-define>
										<data>
											<line>
												<![CDATA[response data line1&]]>
											</line>
											<line>
												<![CDATA[response data line2]]>
											</line>
										</data>
									</response>
								</telnet>
							</if>
							
							<if-else condition="1=1" name="if-else-flow-3">
								<telnet serviceName="">
									<property-define>
										<property name="connection.driver_class">super.host</property>
										<property name="connection.url">this.port</property>
									</property-define>
									<request name="request">
										<var-define>
											<bool name="request">true</bool>
										</var-define>
										<data>
											<line>
												<![CDATA[request data line1&]]>
											</line>
											<line>
												<![CDATA[request data line2]]>
											</line>
										</data>
									</request>
									<response name="response">
										<var-define>
											<bool name="response">true</bool>
										</var-define>
										<data>
											<line>
												<![CDATA[response data line1&]]>
											</line>
											<line>
												<![CDATA[response data line2]]>
											</line>
										</data>
									</response>
								</telnet>
							</if-else>
							
						</thread>	
					</server>
					<server name="io-server" host="127.0.0.1">
						<ftp name="input-ftp">
							<property-define>
								<property name="host">this.host</property>
								<property name="port">11001</property>
								<property name="user.name">cyyan</property>
								<property name="user.password">cyyan</property>
							</property-define>
						</ftp>
						<telnet name="output-telnet">
							<property-define>
								<property name="host">this.host</property>
								<property name="port">12001</property>
							</property-define>
						</telnet>
					</server>
				</supplier>
			</market>
		</economy>
	</global>
</root>